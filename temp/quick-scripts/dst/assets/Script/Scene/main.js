
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Scene/main.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '4dc62a5jRdCIavSwlUAfy7i', 'main');
// Script/Scene/main.js

"use strict";

var global = require("global");

cc.Class({
  "extends": cc.Component,
  properties: {
    item: {
      "default": null,
      type: cc.Node
    },
    all_rank: {
      "default": null,
      type: cc.Node
    },
    f_rank: {
      "default": null,
      type: cc.Node
    },
    w_rank: {
      "default": null,
      type: cc.Node
    },
    content: {
      "default": null,
      type: cc.Node
    },
    restart: {
      "default": null,
      type: cc.Node
    },
    btn_rank: {
      "default": null,
      type: cc.Node
    },
    btn_bbs: {
      "default": null,
      type: cc.Node
    },
    btn_msg: {
      "default": null,
      type: cc.Node
    },
    btn_cancel: {
      "default": null,
      type: cc.Node
    },
    bbs: {
      "default": null,
      type: cc.Node
    },
    msg: {
      "default": null,
      type: cc.EditBox
    },
    num: {
      "default": null,
      type: cc.Label
    },
    map: {
      "default": null,
      type: cc.Node
    },
    block: {
      "default": [],
      type: cc.Prefab
    },
    prop: {
      "default": [],
      type: cc.Prefab
    },
    tips: {
      "default": null,
      type: cc.Label
    },
    stage: {
      "default": null,
      type: cc.Node
    },
    boo: {
      "default": null,
      type: cc.Node
    },
    bg: {
      "default": null,
      type: cc.Node
    }
  },
  // use this for initialization
  onLoad: function onLoad() {
    if (new Date().getHours() > 0 && new Date().getHours() < 5) {
      this.tips.string = "熬夜很辛苦\n谢谢你选择让小卜陪你";
    }

    global.game = this;
    var manager = cc.director.getCollisionManager();
    manager.enabled = true; // manager.enabledDebugDraw = true;
    // manager.enabledDrawBoundingBox = true;

    global.bonus = 0;
    this.boo.ori_xv = 1;
    this.boo.ori_xa = 0.2;
    this.boo.xv = this.boo.ori_xv;
    this.boo.xa = this.boo.ori_xa;
    global.distance = 0;
    global.num = 0;
    global.gameover = false;
    this.edge = 0;
    this.boo_move = false;
    this.node.on('touchstart', function (event) {
      if (!global.gameover) {
        this.boo.xv = this.boo.ori_xv;
        this.boo.xa = this.boo.ori_xa;
        this.boo_move = true;
      }
    }, this);
    this.node.on('touchend', function (event) {
      this.boo_move = false;
    }, this);

    if (typeof wx != "undefined") {
      var info = wx.getSystemInfoSync();
      this.rankAd = wx.createBannerAd({
        adUnitId: 'adunit-xxx',
        style: {
          left: 0,
          top: info.windowHeight - 110,
          width: info.windowWidth,
          height: 110
        }
      });
    }

    this.restart.on('touchstart', function (event) {
      this.rankAd.hide();
      cc.game.restart();
    }, this);
    this.btn_bbs.on('touchstart', function (event) {
      this.bbs.active = true;
    }, this);
    this.btn_cancel.on('touchstart', function (event) {
      this.bbs.active = false;
    }, this);
    global.msg = true;
    this.btn_msg.on('touchstart', function (event) {
      if (!global.msg) {
        wx.showModal({
          title: '小卜:',
          content: '你已经留言过了哟~你也可以到左上角的游戏圈和小伙伴们一起玩耍~',
          success: function success(res) {},
          fail: function fail(argument) {}
        });
        return;
      }

      if (typeof wx != "undefined") {
        var self = this;
        var msg = this.msg.string;

        if (msg.length == 0) {
          return;
        }

        global.msg = false;
        wx.showModal({
          title: '小卜:',
          content: '谢谢，我会认真听你的悄悄话的~',
          success: function success(res) {
            self.bbs.active = false;
          },
          fail: function fail(argument) {
            self.bbs.active = false;
          }
        });
        wx.login({
          success: function success(loginCode) {
            self.data = {
              'type': 'msg',
              'msg': msg,
              'loginCode': loginCode.code
            };
            wx.request({
              url: 'https://url/',
              method: 'POST',
              data: self.data,
              header: {
                //设置参数内容类型为x-www-form-urlencoded
                'Content-Type': 'application/x-www-form-urlencoded',
                'Accept': 'application/json'
              },
              success: function success(res) {},
              fail: function fail(res) {// console.log('f',res)
              }
            });
          }
        });
      }
    }, this);
    /*this.rank_flag = "w";
    this.btn_rank.on('touchstart', function ( event ) {
        switch(this.rank_flag) {
            case "f":
                this.w_rank.active = true;
                this.f_rank.active = false;
                this.rank_flag = "w";
                this.btn_rank.getChildByName("btn_f_rank").active = false;
                this.btn_rank.getChildByName("btn_w_rank").active = true;
            break;
            case "w":
                this.w_rank.active = false;
                this.f_rank.active = true;
                this.rank_flag = "f";
                this.btn_rank.getChildByName("btn_w_rank").active = false;
                this.btn_rank.getChildByName("btn_f_rank").active = true;
            break;
        }
    }, this);*/
  },
  setBLock: function setBLock() {
    var rand = Math.floor(Math.seededRandom() * this.block.length);
    var block = cc.instantiate(this.block[rand]); // console.log(Math.max(0, (100 - global.num) / 100) );

    block.setPosition(global.distance + 400, -100);
    block.scaleX = Math.min(1, Math.max(0, (200 - global.num) / 200)) + Math.seededRandom() * 0.2 + 0.2;
    block.scaleY = block.scaleX;
    block.parent = this.map;
  },
  setProp: function setProp() {
    var rand = Math.floor(Math.seededRandom() * this.prop.length);
    var prop = cc.instantiate(this.prop[rand]);
    prop.setPosition(global.distance + 400 - Math.seededRandom() * 200, 100 + Math.seededRandom() * 50);
    prop.seed = Math.seededRandom();
    prop.parent = this.map;
  },
  setNum: function setNum(num) {
    global.num += num + global.bonus;
    this.num.string = global.num;
  },
  setTip: function setTip(str) {
    this.tips.string = str;
  },
  end: function end() {
    console.log(global.record);
    this.all_rank.active = true;
    global.gameover = true;
    this.showWrank(); // this.showFrank();
  },
  showFrank: function showFrank(argument) {
    /*var openDataContext = wx.getOpenDataContext();
    openDataContext.postMessage([
        {key: "num",value: global.num}
    ]);*/
  },
  showWrank: function showWrank(argument) {
    if (typeof wx != "undefined") {
      this.rankAd.show();
      var self = this;
      wx.login({
        success: function success(loginCode) {
          self.data = {
            'type': 'rank',
            'num': global.num,
            'loginCode': loginCode.code
          };
          wx.request({
            url: 'https://url/',
            method: 'POST',
            data: self.data,
            //参数为键值对字符串
            header: {
              //设置参数内容类型为x-www-form-urlencoded
              'Content-Type': 'application/x-www-form-urlencoded',
              'Accept': 'application/json'
            },
            success: function success(res) {
              for (var i = 0; i < res.data.length; i++) {
                self.genItem(i, res.data[i]);
              }
            },
            fail: function fail(res) {// console.log('f',res)
            }
          });
        }
      });
    }
  },
  genItem: function genItem(i, res) {
    var item = cc.instantiate(this.item);

    if (res.ava) {
      cc.loader.load({
        url: res.ava,
        type: 'png'
      }, function (err, img) {
        item.getChildByName("ava").getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(img);
      });
    }

    item.getChildByName("raw").getComponent(cc.Label).string = i + 1;
    item.getChildByName("name").getComponent(cc.Label).string = res.name;
    item.getChildByName("num").getComponent(cc.Label).string = res.num; // item.active = true;

    item.parent = this.content;
  },
  // called every frame, uncomment this function to activate update callback
  update: function update(dt) {
    /*var color = this.bg.color;
    if (color.equals(cc.Color.BLACK)) {
        return;
    }*/
    // this.ratio += dt * 0.01;
    // this.bg.color = cc.Color.WHITE.lerp(cc.Color.WHITE, this.ratio);
    if (this.boo_move) {
      global.distance += this.boo.xv;
      this.map.x -= this.boo.xv;
      this.boo.xv += this.boo.xa; // this.boo.xv = Math.min(this.boo.xv, 10)

      if (global.distance > this.edge) {
        this.edge += 200 + Math.seededRandom() * 200 + this.boo.xv * this.boo.xv;
        this.setBLock();

        if (global.num % 50 > 45) {
          var action = cc.tintTo(2, Math.seededRandom() * 255, Math.seededRandom() * 255, Math.seededRandom() * 255);
          this.bg.runAction(action);
        }

        if (Math.seededRandom() < 0.3) {
          this.setProp();
        }
      }
    }

    if (!global.gameover) {
      if (this.boo.y > 400) {
        this.stage.scaleX = Math.max(0.2, 1 - (this.boo.y - 400) / 1000);
        this.stage.scaleY = Math.max(0.2, 1 - (this.boo.y - 400) / 1000);
      } else {
        this.stage.scaleX = 1;
        this.stage.scaleY = 1;
      }
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvU2NlbmUvbWFpbi5qcyJdLCJuYW1lcyI6WyJnbG9iYWwiLCJyZXF1aXJlIiwiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJpdGVtIiwidHlwZSIsIk5vZGUiLCJhbGxfcmFuayIsImZfcmFuayIsIndfcmFuayIsImNvbnRlbnQiLCJyZXN0YXJ0IiwiYnRuX3JhbmsiLCJidG5fYmJzIiwiYnRuX21zZyIsImJ0bl9jYW5jZWwiLCJiYnMiLCJtc2ciLCJFZGl0Qm94IiwibnVtIiwiTGFiZWwiLCJtYXAiLCJibG9jayIsIlByZWZhYiIsInByb3AiLCJ0aXBzIiwic3RhZ2UiLCJib28iLCJiZyIsIm9uTG9hZCIsIkRhdGUiLCJnZXRIb3VycyIsInN0cmluZyIsImdhbWUiLCJtYW5hZ2VyIiwiZGlyZWN0b3IiLCJnZXRDb2xsaXNpb25NYW5hZ2VyIiwiZW5hYmxlZCIsImJvbnVzIiwib3JpX3h2Iiwib3JpX3hhIiwieHYiLCJ4YSIsImRpc3RhbmNlIiwiZ2FtZW92ZXIiLCJlZGdlIiwiYm9vX21vdmUiLCJub2RlIiwib24iLCJldmVudCIsInd4IiwiaW5mbyIsImdldFN5c3RlbUluZm9TeW5jIiwicmFua0FkIiwiY3JlYXRlQmFubmVyQWQiLCJhZFVuaXRJZCIsInN0eWxlIiwibGVmdCIsInRvcCIsIndpbmRvd0hlaWdodCIsIndpZHRoIiwid2luZG93V2lkdGgiLCJoZWlnaHQiLCJoaWRlIiwiYWN0aXZlIiwic2hvd01vZGFsIiwidGl0bGUiLCJzdWNjZXNzIiwicmVzIiwiZmFpbCIsImFyZ3VtZW50Iiwic2VsZiIsImxlbmd0aCIsImxvZ2luIiwibG9naW5Db2RlIiwiZGF0YSIsImNvZGUiLCJyZXF1ZXN0IiwidXJsIiwibWV0aG9kIiwiaGVhZGVyIiwic2V0QkxvY2siLCJyYW5kIiwiTWF0aCIsImZsb29yIiwic2VlZGVkUmFuZG9tIiwiaW5zdGFudGlhdGUiLCJzZXRQb3NpdGlvbiIsInNjYWxlWCIsIm1pbiIsIm1heCIsInNjYWxlWSIsInBhcmVudCIsInNldFByb3AiLCJzZWVkIiwic2V0TnVtIiwic2V0VGlwIiwic3RyIiwiZW5kIiwiY29uc29sZSIsImxvZyIsInJlY29yZCIsInNob3dXcmFuayIsInNob3dGcmFuayIsInNob3ciLCJpIiwiZ2VuSXRlbSIsImF2YSIsImxvYWRlciIsImxvYWQiLCJlcnIiLCJpbWciLCJnZXRDaGlsZEJ5TmFtZSIsImdldENvbXBvbmVudCIsIlNwcml0ZSIsInNwcml0ZUZyYW1lIiwiU3ByaXRlRnJhbWUiLCJuYW1lIiwidXBkYXRlIiwiZHQiLCJ4IiwiYWN0aW9uIiwidGludFRvIiwicnVuQWN0aW9uIiwieSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxNQUFNLEdBQUdDLE9BQU8sQ0FBQyxRQUFELENBQXBCOztBQUNBQyxFQUFFLENBQUNDLEtBQUgsQ0FBUztBQUNMLGFBQVNELEVBQUUsQ0FBQ0UsU0FEUDtBQUdMQyxFQUFBQSxVQUFVLEVBQUU7QUFDUkMsSUFBQUEsSUFBSSxFQUFFO0FBQ0YsaUJBQVMsSUFEUDtBQUVGQyxNQUFBQSxJQUFJLEVBQUVMLEVBQUUsQ0FBQ007QUFGUCxLQURFO0FBS1JDLElBQUFBLFFBQVEsRUFBRTtBQUNOLGlCQUFTLElBREg7QUFFTkYsTUFBQUEsSUFBSSxFQUFFTCxFQUFFLENBQUNNO0FBRkgsS0FMRjtBQVNSRSxJQUFBQSxNQUFNLEVBQUU7QUFDSixpQkFBUyxJQURMO0FBRUpILE1BQUFBLElBQUksRUFBRUwsRUFBRSxDQUFDTTtBQUZMLEtBVEE7QUFhUkcsSUFBQUEsTUFBTSxFQUFFO0FBQ0osaUJBQVMsSUFETDtBQUVKSixNQUFBQSxJQUFJLEVBQUVMLEVBQUUsQ0FBQ007QUFGTCxLQWJBO0FBaUJSSSxJQUFBQSxPQUFPLEVBQUU7QUFDTCxpQkFBUyxJQURKO0FBRUxMLE1BQUFBLElBQUksRUFBRUwsRUFBRSxDQUFDTTtBQUZKLEtBakJEO0FBcUJSSyxJQUFBQSxPQUFPLEVBQUU7QUFDTCxpQkFBUyxJ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LElBQUksQ0FBQyxLQUFLL0QsR0FBTCxDQUFTaUcsQ0FBVCxHQUFhLEdBQWQsSUFBcUIsSUFBdkMsQ0FBcEI7QUFDSCxPQUhELE1BR087QUFDSCxhQUFLbEcsS0FBTCxDQUFXOEQsTUFBWCxHQUFvQixDQUFwQjtBQUNBLGFBQUs5RCxLQUFMLENBQVdpRSxNQUFYLEdBQW9CLENBQXBCO0FBQ0g7QUFDSjtBQUVKO0FBbFlJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBnbG9iYWwgPSByZXF1aXJlKFwiZ2xvYmFsXCIpO1xuY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgaXRlbToge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfSxcbiAgICAgICAgYWxsX3Jhbms6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgICAgIH0sXG4gICAgICAgIGZfcmFuazoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfSxcbiAgICAgICAgd19yYW5rOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxuICAgICAgICB9LFxuICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxuICAgICAgICB9LFxuICAgICAgICByZXN0YXJ0OiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxuICAgICAgICB9LFxuICAgICAgICBidG5fcmFuazoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfSxcbiAgICAgICAgYnRuX2Jiczoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfSxcbiAgICAgICAgYnRuX21zZzoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfSxcbiAgICAgICAgYnRuX2NhbmNlbDoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfSxcbiAgICAgICAgYmJzOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxuICAgICAgICB9LFxuICAgICAgICBtc2c6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5FZGl0Qm94XG4gICAgICAgIH0sXG4gICAgICAgIG51bToge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsXG4gICAgICAgIH0sXG4gICAgICAgIG1hcDoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfSxcbiAgICAgICAgYmxvY2s6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogY2MuUHJlZmFiXG4gICAgICAgIH0sXG4gICAgICAgIHByb3A6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogY2MuUHJlZmFiXG4gICAgICAgIH0sXG4gICAgICAgIHRpcHM6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5MYWJlbFxuICAgICAgICB9LFxuICAgICAgICBzdGFnZToge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfSxcbiAgICAgICAgYm9vOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxuICAgICAgICB9LFxuICAgICAgICBiZzoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBpZihuZXcgRGF0ZSgpLmdldEhvdXJzKCkgPiAwICYmIG5ldyBEYXRlKCkuZ2V0SG91cnMoKSA8IDUpIHtcbiAgICAgICAgICAgIHRoaXMudGlwcy5zdHJpbmcgPSBcIueGrOWknOW+iOi+m+iLplxcbuiwouiwouS9oOmAieaLqeiuqeWwj+WNnOmZquS9oFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2xvYmFsLmdhbWUgPSB0aGlzO1xuXG4gICAgICAgIHZhciBtYW5hZ2VyID0gY2MuZGlyZWN0b3IuZ2V0Q29sbGlzaW9uTWFuYWdlcigpO1xuICAgICAgICBtYW5hZ2VyLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAvLyBtYW5hZ2VyLmVuYWJsZWREZWJ1Z0RyYXcgPSB0cnVlO1xuICAgICAgICAvLyBtYW5hZ2VyLmVuYWJsZWREcmF3Qm91bmRpbmdCb3ggPSB0cnVlO1xuXG4gICAgICAgIGdsb2JhbC5ib251cyA9IDA7XG5cbiAgICAgICAgdGhpcy5ib28ub3JpX3h2ID0gMTtcbiAgICAgICAgdGhpcy5ib28ub3JpX3hhID0gMC4yO1xuICAgICAgICB0aGlzLmJvby54diA9IHRoaXMuYm9vLm9yaV94djtcbiAgICAgICAgdGhpcy5ib28ueGEgPSB0aGlzLmJvby5vcmlfeGE7XG5cbiAgICAgICAgZ2xvYmFsLmRpc3RhbmNlID0gMDtcbiAgICAgICAgZ2xvYmFsLm51bSA9IDA7XG4gICAgICAgIGdsb2JhbC5nYW1lb3ZlciA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuZWRnZSA9IDA7XG5cbiAgICAgICAgdGhpcy5ib29fbW92ZSA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMubm9kZS5vbigndG91Y2hzdGFydCcsIGZ1bmN0aW9uICggZXZlbnQgKSB7XG4gICAgICAgICAgICBpZighZ2xvYmFsLmdhbWVvdmVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ib28ueHYgPSB0aGlzLmJvby5vcmlfeHY7XG4gICAgICAgICAgICAgICAgdGhpcy5ib28ueGEgPSB0aGlzLmJvby5vcmlfeGE7XG4gICAgICAgICAgICAgICAgdGhpcy5ib29fbW92ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgICB0aGlzLm5vZGUub24oJ3RvdWNoZW5kJywgZnVuY3Rpb24gKCBldmVudCApIHtcbiAgICAgICAgICAgIHRoaXMuYm9vX21vdmUgPSBmYWxzZTtcbiAgICAgICAgfSwgdGhpcyk7XG5cblxuICAgICAgICBpZih0eXBlb2Yod3gpICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHZhciBpbmZvID0gd3guZ2V0U3lzdGVtSW5mb1N5bmMoKTtcbiAgICAgICAgICAgIHRoaXMucmFua0FkID0gd3guY3JlYXRlQmFubmVyQWQoe1xuICAgICAgICAgICAgICAgIGFkVW5pdElkOiAnYWR1bml0LXh4eCcsXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBpbmZvLndpbmRvd0hlaWdodCAtIDExMCxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGluZm8ud2luZG93V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTEwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIHRoaXMucmVzdGFydC5vbigndG91Y2hzdGFydCcsIGZ1bmN0aW9uICggZXZlbnQgKSB7XG4gICAgICAgICAgICB0aGlzLnJhbmtBZC5oaWRlKCk7XG4gICAgICAgICAgICBjYy5nYW1lLnJlc3RhcnQoKTtcbiAgICAgICAgfSwgdGhpcyk7XG5cbiAgICAgICAgdGhpcy5idG5fYmJzLm9uKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKCBldmVudCApIHtcbiAgICAgICAgXHR0aGlzLmJicy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB9LCB0aGlzKTtcblxuICAgICAgICB0aGlzLmJ0bl9jYW5jZWwub24oJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbiAoIGV2ZW50ICkge1xuICAgICAgICBcdHRoaXMuYmJzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB9LCB0aGlzKTtcblxuXG4gICAgICAgIGdsb2JhbC5tc2cgPSB0cnVlO1xuICAgICAgICB0aGlzLmJ0bl9tc2cub24oJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbiAoIGV2ZW50ICkge1xuICAgICAgICBcdGlmKCFnbG9iYWwubXNnKSB7XG4gICAgICAgICAgICAgICAgd3guc2hvd01vZGFsKHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICflsI/ljZw6JyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ+S9oOW3sue7j+eVmeiogOi/h+S6huWTn37kvaDkuZ/lj6/ku6XliLDlt6bkuIrop5LnmoTmuLjmiI/lnIjlkozlsI/kvJnkvLTku6zkuIDotbfnjqnogI1+JyxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgIFx0fVxuXHQgICAgICAgIGlmKHR5cGVvZih3eCkgIT0gXCJ1bmRlZmluZWRcIikge1xuXG5cdCAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgICAgICAgdmFyIG1zZyA9IHRoaXMubXNnLnN0cmluZztcblxuXHQgICAgICAgICAgICBpZihtc2cubGVuZ3RoID09IDApIHtcblx0ICAgICAgICAgICAgXHRyZXR1cm47XG5cdCAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGdsb2JhbC5tc2cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB3eC5zaG93TW9kYWwoe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+Wwj+WNnDonLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAn6LCi6LCi77yM5oiR5Lya6K6k55yf5ZCs5L2g55qE5oKE5oKE6K+d55qEficsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYmJzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYmJzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG5cdCAgICAgICAgICAgIHd4LmxvZ2luKHtcblx0ICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobG9naW5Db2RlKSB7XG5cdFx0ICAgICAgICAgICAgICAgIHNlbGYuZGF0YSA9IHtcblx0XHQgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ21zZycsXG5cdFx0ICAgICAgICAgICAgICAgICAgICAnbXNnJzogbXNnLFxuXHRcdCAgICAgICAgICAgICAgICAgICAgJ2xvZ2luQ29kZSc6IGxvZ2luQ29kZS5jb2RlXG5cdFx0ICAgICAgICAgICAgICAgIH07XG5cblx0XHQgICAgICAgICAgICAgICAgd3gucmVxdWVzdCh7XG5cdFx0ICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL3VybC8nLFxuXHRcdCAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG5cdFx0ICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmRhdGEsXG5cdFx0ICAgICAgICAgICAgICAgICAgICBoZWFkZXI6IHtcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAvL+iuvue9ruWPguaVsOWGheWuueexu+Wei+S4ungtd3d3LWZvcm0tdXJsZW5jb2RlZFxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbidcblx0XHQgICAgICAgICAgICAgICAgICAgIH0sXG5cdFx0ICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICB9LFxuXHRcdCAgICAgICAgICAgICAgICAgICAgZmFpbDogZnVuY3Rpb24gKHJlcykge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdmJyxyZXMpXG5cdFx0ICAgICAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgICAgIH0pO1xuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH0pO1xuXHRcdCAgICB9XG5cbiAgICAgICAgfSwgdGhpcyk7XG5cbiAgICAgICAgLyp0aGlzLnJhbmtfZmxhZyA9IFwid1wiO1xuICAgICAgICB0aGlzLmJ0bl9yYW5rLm9uKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKCBldmVudCApIHtcbiAgICAgICAgICAgIHN3aXRjaCh0aGlzLnJhbmtfZmxhZykge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJmXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud19yYW5rLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZl9yYW5rLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmtfZmxhZyA9IFwid1wiO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJ0bl9yYW5rLmdldENoaWxkQnlOYW1lKFwiYnRuX2ZfcmFua1wiKS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idG5fcmFuay5nZXRDaGlsZEJ5TmFtZShcImJ0bl93X3JhbmtcIikuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwid1wiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLndfcmFuay5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mX3JhbmsuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5rX2ZsYWcgPSBcImZcIjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idG5fcmFuay5nZXRDaGlsZEJ5TmFtZShcImJ0bl93X3JhbmtcIikuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnRuX3JhbmsuZ2V0Q2hpbGRCeU5hbWUoXCJidG5fZl9yYW5rXCIpLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMpOyovXG5cbiAgICB9LFxuXG4gICAgc2V0QkxvY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmFuZCA9IE1hdGguZmxvb3IoTWF0aC5zZWVkZWRSYW5kb20oKSAqIHRoaXMuYmxvY2subGVuZ3RoKTtcbiAgICAgICAgdmFyIGJsb2NrID0gY2MuaW5zdGFudGlhdGUodGhpcy5ibG9ja1tyYW5kXSk7XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coTWF0aC5tYXgoMCwgKDEwMCAtIGdsb2JhbC5udW0pIC8gMTAwKSApO1xuICAgICAgICBibG9jay5zZXRQb3NpdGlvbihnbG9iYWwuZGlzdGFuY2UgKyA0MDAsIC0xMDApO1xuICAgICAgICBibG9jay5zY2FsZVggPSBNYXRoLm1pbigxLCBNYXRoLm1heCgwLCAoMjAwIC0gZ2xvYmFsLm51bSkgLyAyMDApKSArIE1hdGguc2VlZGVkUmFuZG9tKCkgKiAwLjIgKyAwLjI7XG4gICAgICAgIGJsb2NrLnNjYWxlWSA9IGJsb2NrLnNjYWxlWDtcblxuICAgICAgICBibG9jay5wYXJlbnQgPSB0aGlzLm1hcDtcbiAgICB9LFxuXG4gICAgc2V0UHJvcDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByYW5kID0gTWF0aC5mbG9vcihNYXRoLnNlZWRlZFJhbmRvbSgpICogdGhpcy5wcm9wLmxlbmd0aCk7XG4gICAgICAgIHZhciBwcm9wID0gY2MuaW5zdGFudGlhdGUodGhpcy5wcm9wW3JhbmRdKTtcblxuICAgICAgICBwcm9wLnNldFBvc2l0aW9uKGdsb2JhbC5kaXN0YW5jZSArIDQwMCAtIE1hdGguc2VlZGVkUmFuZG9tKCkgKiAyMDAsIDEwMCArIE1hdGguc2VlZGVkUmFuZG9tKCkgKiA1MCk7XG4gICAgICAgIHByb3Auc2VlZCA9IE1hdGguc2VlZGVkUmFuZG9tKCk7XG5cbiAgICAgICAgcHJvcC5wYXJlbnQgPSB0aGlzLm1hcDtcbiAgICB9LFxuXG4gICAgc2V0TnVtOiBmdW5jdGlvbihudW0pIHtcbiAgICAgICAgZ2xvYmFsLm51bSArPSBudW0gKyBnbG9iYWwuYm9udXM7XG4gICAgICAgIHRoaXMubnVtLnN0cmluZyA9IGdsb2JhbC5udW07XG4gICAgfSxcblxuICAgIHNldFRpcDogZnVuY3Rpb24oc3RyKSB7XG4gICAgICAgIHRoaXMudGlwcy5zdHJpbmcgPSBzdHI7XG4gICAgfSxcblxuICAgIGVuZDogZnVuY3Rpb24oKSB7XG4gICAgXHRjb25zb2xlLmxvZyhnbG9iYWwucmVjb3JkKVxuICAgICAgICB0aGlzLmFsbF9yYW5rLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIGdsb2JhbC5nYW1lb3ZlciA9IHRydWU7XG5cbiAgICAgICAgdGhpcy5zaG93V3JhbmsoKTtcbiAgICAgICAgLy8gdGhpcy5zaG93RnJhbmsoKTtcbiAgICB9LFxuXG4gICAgc2hvd0ZyYW5rOiBmdW5jdGlvbihhcmd1bWVudCkge1xuICAgICAgICAvKnZhciBvcGVuRGF0YUNvbnRleHQgPSB3eC5nZXRPcGVuRGF0YUNvbnRleHQoKTtcbiAgICAgICAgb3BlbkRhdGFDb250ZXh0LnBvc3RNZXNzYWdlKFtcbiAgICAgICAgICAgIHtrZXk6IFwibnVtXCIsdmFsdWU6IGdsb2JhbC5udW19XG4gICAgICAgIF0pOyovXG4gICAgfSxcblxuICAgIHNob3dXcmFuazogZnVuY3Rpb24oYXJndW1lbnQpIHtcbiAgICAgICAgaWYodHlwZW9mKHd4KSAhPSBcInVuZGVmaW5lZFwiKSB7XG5cbiAgICAgICAgICAgIHRoaXMucmFua0FkLnNob3coKTtcblxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICB3eC5sb2dpbih7XG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChsb2dpbkNvZGUpIHtcblxuICAgICAgICAgICAgICAgIHNlbGYuZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAncmFuaycsXG4gICAgICAgICAgICAgICAgICAgICdudW0nOiBnbG9iYWwubnVtLFxuICAgICAgICAgICAgICAgICAgICAnbG9naW5Db2RlJzogbG9naW5Db2RlLmNvZGVcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB3eC5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly91cmwvJyxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGYuZGF0YSwgICAgLy/lj4LmlbDkuLrplK7lgLzlr7nlrZfnrKbkuLJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+iuvue9ruWPguaVsOWGheWuueexu+Wei+S4ungtd3d3LWZvcm0tdXJsZW5jb2RlZFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzLmRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmdlbkl0ZW0oaSwgcmVzLmRhdGFbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZicscmVzKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBnZW5JdGVtOiBmdW5jdGlvbihpLCByZXMpIHtcbiAgICAgICAgdmFyIGl0ZW0gPSBjYy5pbnN0YW50aWF0ZSh0aGlzLml0ZW0pO1xuICAgICAgICBpZihyZXMuYXZhKSB7XG4gICAgICAgICAgICBjYy5sb2FkZXIubG9hZCh7dXJsOnJlcy5hdmEsIHR5cGU6ICdwbmcnfSwgZnVuY3Rpb24gKGVyciwgaW1nKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5nZXRDaGlsZEJ5TmFtZShcImF2YVwiKS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IG5ldyBjYy5TcHJpdGVGcmFtZShpbWcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpdGVtLmdldENoaWxkQnlOYW1lKFwicmF3XCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gaSArIDE7XG4gICAgICAgIGl0ZW0uZ2V0Q2hpbGRCeU5hbWUoXCJuYW1lXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gcmVzLm5hbWU7XG4gICAgICAgIGl0ZW0uZ2V0Q2hpbGRCeU5hbWUoXCJudW1cIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSByZXMubnVtO1xuXG4gICAgICAgIC8vIGl0ZW0uYWN0aXZlID0gdHJ1ZTtcblxuICAgICAgICBpdGVtLnBhcmVudCA9IHRoaXMuY29udGVudDtcbiAgICB9LFxuXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xuXG4gICAgICAgIC8qdmFyIGNvbG9yID0gdGhpcy5iZy5jb2xvcjtcbiAgICAgICAgaWYgKGNvbG9yLmVxdWFscyhjYy5Db2xvci5CTEFDSykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSovXG4gICAgICAgIC8vIHRoaXMucmF0aW8gKz0gZHQgKiAwLjAxO1xuICAgICAgICAvLyB0aGlzLmJnLmNvbG9yID0gY2MuQ29sb3IuV0hJVEUubGVycChjYy5Db2xvci5XSElURSwgdGhpcy5yYXRpbyk7XG5cbiAgICAgICAgaWYodGhpcy5ib29fbW92ZSkge1xuICAgICAgICAgICAgZ2xvYmFsLmRpc3RhbmNlICs9IHRoaXMuYm9vLnh2O1xuICAgICAgICAgICAgdGhpcy5tYXAueCAtPSB0aGlzLmJvby54djtcbiAgICAgICAgICAgIHRoaXMuYm9vLnh2ICs9IHRoaXMuYm9vLnhhO1xuICAgICAgICAgICAgLy8gdGhpcy5ib28ueHYgPSBNYXRoLm1pbih0aGlzLmJvby54diwgMTApXG5cbiAgICAgICAgICAgIGlmKGdsb2JhbC5kaXN0YW5jZSA+IHRoaXMuZWRnZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWRnZSArPSAyMDAgKyBNYXRoLnNlZWRlZFJhbmRvbSgpICogMjAwICsgdGhpcy5ib28ueHYgKiB0aGlzLmJvby54djtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEJMb2NrKCk7XG4gICAgICAgICAgICAgICAgaWYoZ2xvYmFsLm51bSAlIDUwID4gNDUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IGNjLnRpbnRUbygyLCBNYXRoLnNlZWRlZFJhbmRvbSgpICogMjU1LCBNYXRoLnNlZWRlZFJhbmRvbSgpICogMjU1LCBNYXRoLnNlZWRlZFJhbmRvbSgpICogMjU1KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iZy5ydW5BY3Rpb24oYWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoTWF0aC5zZWVkZWRSYW5kb20oKSA8IDAuMykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFByb3AoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZighZ2xvYmFsLmdhbWVvdmVyKSB7XG4gICAgICAgICAgICBpZih0aGlzLmJvby55ID4gNDAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFnZS5zY2FsZVggPSBNYXRoLm1heCgwLjIsIDEgLSAodGhpcy5ib28ueSAtIDQwMCkgLyAxMDAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YWdlLnNjYWxlWSA9IE1hdGgubWF4KDAuMiwgMSAtICh0aGlzLmJvby55IC0gNDAwKSAvIDEwMDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YWdlLnNjYWxlWCA9IDE7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFnZS5zY2FsZVkgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9LFxufSk7XG4iXX0=