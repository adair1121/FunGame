{"version":3,"sources":["assets/Script/domain.js"],"names":["cc","Class","Component","properties","display","Sprite","btn_share","type","Node","start","wx","self","showShareMenu","withShareTicket","updateShareMenu","on","event","shareAppMessage","title","imageUrl","canvas","toTempFilePathSync","x","y","width","height","destWidth","destHeight","success","res","onShareAppMessage","_updaetSubDomainCanvas","update"],"mappings":";;;;;;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,OAAO,EAAEJ,EAAE,CAACK,MADJ;AAERC,IAAAA,SAAS,EAAE;AACP,iBAAS,IADF;AAEPC,MAAAA,IAAI,EAAEP,EAAE,CAACQ;AAFF;AAFH,GAHP;AAWLC,EAAAA,KAXK,mBAWI;AACL;;;AAMA,QAAG,OAAOC,EAAP,IAAc,WAAjB,EAA8B;AAC1B,UAAIC,IAAI,GAAG,IAAX;AAEAD,MAAAA,EAAE,CAACE,aAAH,CAAiB;AACfC,QAAAA,eAAe,EAAE;AADF,OAAjB;AAIAH,MAAAA,EAAE,CAACI,eAAH,CAAmB;AACjBD,QAAAA,eAAe,EAAE;AADA,OAAnB;AAIA,WAAKP,SAAL,CAAeS,EAAf,CAAkB,YAAlB,EAAgC,UAAWC,KAAX,EAAmB;AAC/CN,QAAAA,EAAE,CAACO,eAAH,CAAmB;AACfC,UAAAA,KAAK,EAAE,wBADQ;AAEfC,UAAAA,QAAQ,EAAEC,MAAM,CAACC,kBAAP,CAA0B;AAChCC,YAAAA,CAAC,EAAE,EAD6B;AAEhCC,YAAAA,CAAC,EAAE,GAF6B;AAGhCC,YAAAA,KAAK,EAAE,GAHyB;AAIhCC,YAAAA,MAAM,EAAE,GAJwB;AAKhCC,YAAAA,SAAS,EAAE,GALqB;AAMhCC,YAAAA,UAAU,EAAE;AANoB,WAA1B,CAFK;AAUfC,UAAAA,OAAO,EAAE,iBAASC,GAAT,EAAc,CACtB;AAXc,SAAnB;AAaH,OAdD,EAcG,IAdH;AAeAnB,MAAAA,EAAE,CAACoB,iBAAH,CAAqB,YAAY;AAC/B;AACA,eAAO;AACLZ,UAAAA,KAAK,EAAE,cADF;AAELC,UAAAA,QAAQ,EAAE,qCAFL;AAGLS,UAAAA,OAAO,EAAE,iBAASC,GAAT,EAAc,CACtB;AAJI,SAAP;AAMD,OARD;AAUA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGH;AAEJ,GAxJI;AA0JLE,EAAAA,sBA1JK,oCA0JqB;AACtB;;;;;;;AASH,GApKI;AAsKLC,EAAAA,MAtKK,oBAsKK,CACN;AACH;AAxKI,CAAT","sourceRoot":"/","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        display: cc.Sprite,\n        btn_share: {\n            default: null,\n            type: cc.Node\n        }\n    },\n\n    start () {\n        /*this._isShow = false;\n\n        \n        this.tex = new cc.Texture2D();*/\n\n\n        if(typeof(wx) != \"undefined\") {\n            var self = this;\n\n            wx.showShareMenu({\n              withShareTicket: true\n            });\n\n            wx.updateShareMenu({\n              withShareTicket: true\n            });\n\n            this.btn_share.on('touchstart', function ( event ) {\n                wx.shareAppMessage({\n                    title: '最强挑战赛排行，看见没？那个就是第一名的人~',\n                    imageUrl: canvas.toTempFilePathSync({\n                        x: 75,\n                        y: 300,\n                        width: 600,\n                        height: 480,\n                        destWidth: 500,\n                        destHeight: 400\n                    }),\n                    success: function(res) {\n                    }\n                });\n            }, this);\n            wx.onShareAppMessage(function () {\n              // 用户点击了“转发”按钮\n              return {\n                title: '最强挑战赛，火热进行中~',\n                imageUrl: \"res/raw-assets/Texture/share/s1.png\",\n                success: function(res) {\n                }\n              }\n            });\n\n            /*wx.login({\n              success: function (loginCode) {\n\n                    wx.getUserInfo({\n                        lang: 'zh_CN',\n                        success: function (res) {\n\n                            self.data = {\n                                'type': 'user',\n                                'name': res.userInfo.nickName,\n                                'ava': res.userInfo.avatarUrl,\n                                'sex': res.userInfo.gender,\n                                'loginCode': loginCode.code\n                            }\n\n                            wx.request({\n                                url: 'https://url/',\n                                method: 'POST',\n                                data: self.data,    //参数为键值对字符串\n                                header: {\n                                    //设置参数内容类型为x-www-form-urlencoded\n                                    'Content-Type':'application/x-www-form-urlencoded',\n                                    'Accept': 'application/json'\n                                },\n                                success: function (res) {\n\n                                },\n                                fail: function (res) {\n\n                                    // console.log('f',res)\n                                }\n                            });\n\n                        },\n                        fail: function (res) {\n\n                            // iOS 和 Android 对于拒绝授权的回调 errMsg 没有统一，需要做一下兼容处理\n                            if (res.errMsg.indexOf('auth deny') > -1 || res.errMsg.indexOf('auth denied') > -1 ) {\n                              // 处理用户拒绝授权的情况\n                                wx.showModal({\n                                    title: '小卜:',\n                                    content: '登录后才可以在排行榜看到你的分数哦',\n                                    success: function (res) {\n                                      if (res.confirm) {\n                                            wx.openSetting({\n                                                success:function(res){\n                                                    wx.getUserInfo({\n                                                        lang: 'zh_CN',\n                                                        success: function (res) {\n\n                                                            self.data = {\n                                                                'type': 'user',\n                                                                'name': res.userInfo.nickName,\n                                                                'ava': res.userInfo.avatarUrl,\n                                                                'sex': res.userInfo.gender,\n                                                                'loginCode': loginCode.code\n                                                            }\n\n                                                            wx.request({\n                                                                url: 'https://url/',\n                                                                method: 'POST',\n                                                                data: self.data,    //参数为键值对字符串\n                                                                header: {\n                                                                    //设置参数内容类型为x-www-form-urlencoded\n                                                                    'Content-Type':'application/x-www-form-urlencoded',\n                                                                    'Accept': 'application/json'\n                                                                },\n                                                                success: function (res) {\n\n                                                                },\n                                                                fail: function (res) {\n\n                                                                    // console.log('f',res)\n                                                                }\n                                                            });\n                                                        }\n\n                                                    });\n                                                }\n\n                                            })\n                                      }\n                                    },\n                                    fail: function (argument) {\n                                    }\n                                });\n\n                            }\n\n\n                        }\n                    })\n\n              }\n            });*/\n\n        }\n\n    },\n\n    _updaetSubDomainCanvas () {\n        /*if (!this.tex) {\n            return;\n        }\n        this.tex.initWithElement(sharedCanvas);\n        this.tex.handleLoadedTexture();\n\n        \n        this.display.spriteFrame = new cc.SpriteFrame(this.tex);*/\n\n    },\n\n    update () {\n        // this._updaetSubDomainCanvas();\n    }\n\n});\n"]}