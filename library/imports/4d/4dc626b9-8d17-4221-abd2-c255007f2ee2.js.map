{"version":3,"sources":["assets/Script/Scene/main.js"],"names":["global","require","cc","Class","Component","properties","item","type","Node","all_rank","f_rank","w_rank","content","restart","btn_rank","btn_bbs","btn_msg","btn_cancel","bbs","msg","EditBox","num","Label","map","block","Prefab","prop","tips","stage","boo","bg","onLoad","Date","getHours","string","game","manager","director","getCollisionManager","enabled","bonus","ori_xv","ori_xa","xv","xa","distance","gameover","edge","boo_move","node","on","event","wx","info","getSystemInfoSync","rankAd","createBannerAd","adUnitId","style","left","top","windowHeight","width","windowWidth","height","hide","active","showModal","title","success","res","fail","argument","self","length","login","loginCode","data","code","request","url","method","header","setBLock","rand","Math","floor","seededRandom","instantiate","setPosition","scaleX","min","max","scaleY","parent","setProp","seed","setNum","setTip","str","end","console","log","record","showWrank","showFrank","show","i","genItem","ava","loader","load","err","img","getChildByName","getComponent","Sprite","spriteFrame","SpriteFrame","name","update","dt","x","action","tintTo","runAction","y"],"mappings":"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","sourceRoot":"/","sourcesContent":["var global = require(\"global\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        item: {\n            default: null,\n            type: cc.Node\n        },\n        all_rank: {\n            default: null,\n            type: cc.Node\n        },\n        f_rank: {\n            default: null,\n            type: cc.Node\n        },\n        w_rank: {\n            default: null,\n            type: cc.Node\n        },\n        content: {\n            default: null,\n            type: cc.Node\n        },\n        restart: {\n            default: null,\n            type: cc.Node\n        },\n        btn_rank: {\n            default: null,\n            type: cc.Node\n        },\n        btn_bbs: {\n            default: null,\n            type: cc.Node\n        },\n        btn_msg: {\n            default: null,\n            type: cc.Node\n        },\n        btn_cancel: {\n            default: null,\n            type: cc.Node\n        },\n        bbs: {\n            default: null,\n            type: cc.Node\n        },\n        msg: {\n            default: null,\n            type: cc.EditBox\n        },\n        num: {\n            default: null,\n            type: cc.Label\n        },\n        map: {\n            default: null,\n            type: cc.Node\n        },\n        block: {\n            default: [],\n            type: cc.Prefab\n        },\n        prop: {\n            default: [],\n            type: cc.Prefab\n        },\n        tips: {\n            default: null,\n            type: cc.Label\n        },\n        stage: {\n            default: null,\n            type: cc.Node\n        },\n        boo: {\n            default: null,\n            type: cc.Node\n        },\n        bg: {\n            default: null,\n            type: cc.Node\n        }\n    },\n\n    // use this for initialization\n    onLoad: function () {\n\n        if(new Date().getHours() > 0 && new Date().getHours() < 5) {\n            this.tips.string = \"熬夜很辛苦\\n谢谢你选择让小卜陪你\";\n        }\n\n        global.game = this;\n\n        var manager = cc.director.getCollisionManager();\n        manager.enabled = true;\n        // manager.enabledDebugDraw = true;\n        // manager.enabledDrawBoundingBox = true;\n\n        global.bonus = 0;\n\n        this.boo.ori_xv = 1;\n        this.boo.ori_xa = 0.2;\n        this.boo.xv = this.boo.ori_xv;\n        this.boo.xa = this.boo.ori_xa;\n\n        global.distance = 0;\n        global.num = 0;\n        global.gameover = false;\n\n        this.edge = 0;\n\n        this.boo_move = false;\n\n        this.node.on('touchstart', function ( event ) {\n            if(!global.gameover) {\n                this.boo.xv = this.boo.ori_xv;\n                this.boo.xa = this.boo.ori_xa;\n                this.boo_move = true;\n            }\n        }, this);\n        this.node.on('touchend', function ( event ) {\n            this.boo_move = false;\n        }, this);\n\n\n        if(typeof(wx) != \"undefined\") {\n            var info = wx.getSystemInfoSync();\n            this.rankAd = wx.createBannerAd({\n                adUnitId: 'adunit-xxx',\n                style: {\n                    left: 0,\n                    top: info.windowHeight - 110,\n                    width: info.windowWidth,\n                    height: 110\n                }\n            });\n        }\n\n\n        this.restart.on('touchstart', function ( event ) {\n            this.rankAd.hide();\n            cc.game.restart();\n        }, this);\n\n        this.btn_bbs.on('touchstart', function ( event ) {\n        \tthis.bbs.active = true;\n        }, this);\n\n        this.btn_cancel.on('touchstart', function ( event ) {\n        \tthis.bbs.active = false;\n        }, this);\n\n\n        global.msg = true;\n        this.btn_msg.on('touchstart', function ( event ) {\n        \tif(!global.msg) {\n                wx.showModal({\n                    title: '小卜:',\n                    content: '你已经留言过了哟~你也可以到左上角的游戏圈和小伙伴们一起玩耍~',\n                    success: function (res) {\n\n                    },\n                    fail: function (argument) {\n\n                    }\n                });\n                return;\n        \t}\n\t        if(typeof(wx) != \"undefined\") {\n\n\t            var self = this;\n\t            var msg = this.msg.string;\n\n\t            if(msg.length == 0) {\n\t            \treturn;\n\t            }\n\n                global.msg = false;\n                wx.showModal({\n                    title: '小卜:',\n                    content: '谢谢，我会认真听你的悄悄话的~',\n                    success: function (res) {\n                        self.bbs.active = false;\n                    },\n                    fail: function (argument) {\n                        self.bbs.active = false;\n                    }\n                });\n                \n\t            wx.login({\n\t              success: function (loginCode) {\n\t\t                self.data = {\n\t\t                    'type': 'msg',\n\t\t                    'msg': msg,\n\t\t                    'loginCode': loginCode.code\n\t\t                };\n\n\t\t                wx.request({\n\t\t                    url: 'https://url/',\n\t\t                    method: 'POST',\n\t\t                    data: self.data,\n\t\t                    header: {\n\t\t                        //设置参数内容类型为x-www-form-urlencoded\n\t\t                        'Content-Type':'application/x-www-form-urlencoded',\n\t\t                        'Accept': 'application/json'\n\t\t                    },\n\t\t                    success: function (res) {\n\t\t                    },\n\t\t                    fail: function (res) {\n\t\t                        // console.log('f',res)\n\t\t                    }\n\t\t                });\n\t\t            }\n\t\t        });\n\t\t    }\n\n        }, this);\n\n        /*this.rank_flag = \"w\";\n        this.btn_rank.on('touchstart', function ( event ) {\n            switch(this.rank_flag) {\n                case \"f\":\n                    this.w_rank.active = true;\n                    this.f_rank.active = false;\n                    this.rank_flag = \"w\";\n                    this.btn_rank.getChildByName(\"btn_f_rank\").active = false;\n                    this.btn_rank.getChildByName(\"btn_w_rank\").active = true;\n                break;\n                case \"w\":\n                    this.w_rank.active = false;\n                    this.f_rank.active = true;\n                    this.rank_flag = \"f\";\n                    this.btn_rank.getChildByName(\"btn_w_rank\").active = false;\n                    this.btn_rank.getChildByName(\"btn_f_rank\").active = true;\n                break;\n            }\n        }, this);*/\n\n    },\n\n    setBLock: function() {\n        var rand = Math.floor(Math.seededRandom() * this.block.length);\n        var block = cc.instantiate(this.block[rand]);\n\n        // console.log(Math.max(0, (100 - global.num) / 100) );\n        block.setPosition(global.distance + 400, -100);\n        block.scaleX = Math.min(1, Math.max(0, (200 - global.num) / 200)) + Math.seededRandom() * 0.2 + 0.2;\n        block.scaleY = block.scaleX;\n\n        block.parent = this.map;\n    },\n\n    setProp: function() {\n        var rand = Math.floor(Math.seededRandom() * this.prop.length);\n        var prop = cc.instantiate(this.prop[rand]);\n\n        prop.setPosition(global.distance + 400 - Math.seededRandom() * 200, 100 + Math.seededRandom() * 50);\n        prop.seed = Math.seededRandom();\n\n        prop.parent = this.map;\n    },\n\n    setNum: function(num) {\n        global.num += num + global.bonus;\n        this.num.string = global.num;\n    },\n\n    setTip: function(str) {\n        this.tips.string = str;\n    },\n\n    end: function() {\n    \tconsole.log(global.record)\n        this.all_rank.active = true;\n        global.gameover = true;\n\n        this.showWrank();\n        // this.showFrank();\n    },\n\n    showFrank: function(argument) {\n        /*var openDataContext = wx.getOpenDataContext();\n        openDataContext.postMessage([\n            {key: \"num\",value: global.num}\n        ]);*/\n    },\n\n    showWrank: function(argument) {\n        if(typeof(wx) != \"undefined\") {\n\n            this.rankAd.show();\n\n            var self = this;\n\n            wx.login({\n              success: function (loginCode) {\n\n                self.data = {\n                    'type': 'rank',\n                    'num': global.num,\n                    'loginCode': loginCode.code\n                }\n\n                wx.request({\n                    url: 'https://url/',\n                    method: 'POST',\n                    data: self.data,    //参数为键值对字符串\n                    header: {\n                        //设置参数内容类型为x-www-form-urlencoded\n                        'Content-Type':'application/x-www-form-urlencoded',\n                        'Accept': 'application/json'\n                    },\n                    success: function (res) {\n                        for (var i = 0; i < res.data.length; i++) {\n                            self.genItem(i, res.data[i]);\n                        }\n                    },\n                    fail: function (res) {\n                        // console.log('f',res)\n                    }\n                });\n\n              }\n            });\n\n        }\n    },\n\n    genItem: function(i, res) {\n        var item = cc.instantiate(this.item);\n        if(res.ava) {\n            cc.loader.load({url:res.ava, type: 'png'}, function (err, img) {\n                item.getChildByName(\"ava\").getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(img);\n            });\n        }\n\n        item.getChildByName(\"raw\").getComponent(cc.Label).string = i + 1;\n        item.getChildByName(\"name\").getComponent(cc.Label).string = res.name;\n        item.getChildByName(\"num\").getComponent(cc.Label).string = res.num;\n\n        // item.active = true;\n\n        item.parent = this.content;\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n\n        /*var color = this.bg.color;\n        if (color.equals(cc.Color.BLACK)) {\n            return;\n        }*/\n        // this.ratio += dt * 0.01;\n        // this.bg.color = cc.Color.WHITE.lerp(cc.Color.WHITE, this.ratio);\n\n        if(this.boo_move) {\n            global.distance += this.boo.xv;\n            this.map.x -= this.boo.xv;\n            this.boo.xv += this.boo.xa;\n            // this.boo.xv = Math.min(this.boo.xv, 10)\n\n            if(global.distance > this.edge) {\n                this.edge += 200 + Math.seededRandom() * 200 + this.boo.xv * this.boo.xv;\n                this.setBLock();\n                if(global.num % 50 > 45) {\n                    var action = cc.tintTo(2, Math.seededRandom() * 255, Math.seededRandom() * 255, Math.seededRandom() * 255);\n                    this.bg.runAction(action);\n                }\n                if(Math.seededRandom() < 0.3) {\n                    this.setProp();\n                }\n            }\n        }\n\n        if(!global.gameover) {\n            if(this.boo.y > 400) {\n                this.stage.scaleX = Math.max(0.2, 1 - (this.boo.y - 400) / 1000);\n                this.stage.scaleY = Math.max(0.2, 1 - (this.boo.y - 400) / 1000);\n            } else {\n                this.stage.scaleX = 1;\n                this.stage.scaleY = 1;\n            }\n        }\n\n    },\n});\n"]}